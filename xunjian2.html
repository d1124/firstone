
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>测试 - layui</title>
  <link rel="stylesheet" href="layui/css/layui.css">

    <script src="jquery-1.12.4.js"></script>
<script src="Bmob-2.2.5.min.js"></script>
</head>
<body>


<table class="layui-hide" id="test" lay-filter="test"></table>



<form class="layui-form" action="">
  <div class="layui-form-item">
    <label class="layui-form-label">输入内容：</label>
    <div class="layui-input-block">
      <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="请输入" class="layui-input">
    </div>
  </div>
  <div class="layui-form-item">
    <button class="layui-btn" lay-submit="" lay-filter="demo1">提交</button>
  </div>
</form>

<!-- 引入 layui.js 的 <script> 标签最好放置在 html 末尾 -->
<script src="layui/layui.js"></script>

<script>
layui.use('table', function(){
  var table = layui.table
  ,form = layui.form;


// Bmob.initialize("2ba7d49d6cd824c5", "981124");
Bmob.initialize("f1cdf3c708bde14d", "981124");

// const query1 = Bmob.Query('Data');
// query1.set("fireboss","dai2");
// query1.set("Date","2021-05-16");
// query1.set("CH4","0.01");
// query1.save().then(res => {
//   console.log(res)
// }).catch(err => {
//   console.log(err)
// })

//添加，需要
// const query2 = Bmob.Query('Data_GAS');
// query2.set("time","7:24");
// query2.set("CH4","0.02");
// query2.save().then(res => {
//   console.log(res.objectId);
//   const pointer = Bmob.Pointer('Data_GAS')//pointer指向
//   const poiID = pointer.set(res.objectId)//指向行
//   const query3 = Bmob.Query('Data')//pointer拥有者
//   query3.equalTo("Date","==", "2021-05-16");
//   query3.equalTo("class","==", "早");
//   query3.equalTo("place","==", "地区1");
//   query3.find().then(res => {
//     const query4 = Bmob.Query('Data')//pointer拥有者
//     query4.get(res[0].objectId).then(res => {//拥有行
//       res.set('time2',poiID);//拥有列
//       res.save();
//     });
//   });
// }).catch(err => {
//   console.log(err)
// })



//pointer添加示例
// const pointer = Bmob.Pointer('FG')//pointer指向
// const poiID1 = pointer.set('80sBOOOn')//指向行
// const poiID2 = pointer.set('QoFG333J')//指向行
// const poiID3 = pointer.set('80sBOOOn')//指向行
// const query = Bmob.Query('path')//pointer拥有者
// query.get('qAy7MMMd').then(res => {//拥有行
//   res.set('F1',poiID1);//拥有列
//   res.set('F2',poiID2);//拥有列
//   res.set('F3',poiID3);//拥有列
//   res.save();
// });

//pointer查询示例
const query = Bmob.Query('Data');//pointer拥有者
//下面参数为Pointer字段名称， 可以一次查询多个表
query.include('time2','time3');//拥有列
query.find().then(res => {
    console.log(res)
    alert(JSON.stringify(res));
    data=res;
    table.render({
      elem: '#test'
      ,url:'https://d1124.github.io/firstone/1.json'
      ,title: '用户数据表'
    ,toolbar: '#toolbarDemo'
      ,cols: [[
        {field:'place', title:'地点',unresize:true, rowspan: 3}
        ,{align: 'center',title:'第一次', colspan: 8}
      ,{align: 'center',title:'第二次', colspan: 8}
      ,{align: 'center',title:'第三次', colspan: 8}
      ],
    [
    {field:'CH4',title:'CH4(\%)' }
      ,{ field:'CO2',title:'CO2(\%)'}
      ,{ field:'CO',title:'CO(ppm)'}
      ,{ field:'O2',title:'O2(\%)'}
      ,{ field:'T',title:'温度(˚C)'}
      ,{ field:'tantou',title:'探头(CH4\%)'}
      ,{ field:'time',title:'时间(h.min)'}
     ,{ field:'fireboss',title:'瓦检员', rowspan: 2}
    ,{field:'null2',title:'CH4',templet: function(d){if(d.time2!=null)return d.time2.CH4;return ''}}
      ,{ field:'null2',title:'CO2',templet: function(d){if(d.time2!=null)return d.time2.CO2;return ''}}
      ,{ field:'CO',title:'CO',templet: function(d){if(d.time2!=null)return d.time2.CO;return ''}}
      ,{ field:'O2',title:'O2',templet: function(d){if(d.time2!=null)return d.time2.O2;return ''}}
      ,{ field:'T',title:'温度',templet: function(d){if(d.time2!=null)return d.time2.T;return ''}}
      ,{ field:'tantou',title:'探头',templet: function(d){if(d.time2u!=null)return d.time2.tantou;return ''}}
      ,{ field:'time',title:'时间(h.min)',templet: function(d){if(d.time2!=null)return d.time2.time;return ''}}
      ,{ field:'fireboss',title:'瓦检员', rowspan: 2,templet: function(d){if(d.time2!=null)return d.time2.fireboss;return ''}},
      {field:'null2',title:'CH4',templet: function(d){if(d.time3!=null)return d.time3.CH4;return ''}}
        ,{ field:'null2',title:'CO2',templet: function(d){if(d.time3!=null)return d.time3.CO2;return ''}}
        ,{ field:'CO',title:'CO',templet: function(d){if(d.time3!=null)return d.time3.CO;return ''}}
        ,{ field:'O2',title:'O2',templet: function(d){if(d.time3!=null)return d.time3.O2;return ''}}
        ,{ field:'T',title:'温度',templet: function(d){if(d.time3!=null)return d.time3.T;return ''}}
        ,{ field:'tantou',title:'探头',templet: function(d){if(d.time3!=null)return d.time3.tantou;return ''}}
        ,{ field:'time',title:'时间(h.min)',templet: function(d){if(d.time3!=null)return d.time3.time;return ''}}
        ,{ field:'fireboss',title:'瓦检员', rowspan: 2,templet: function(d){if(d.time3!=null)return d.time3.fireboss;return ''}},
    ]
    ]
      ,page: true
      ,response: {
        statusCode: 200 //重新规定成功的状态码为 200，table 组件默认为 0
      }
      ,parseData: function(res){ //将原始数据解析成 table 组件所规定的数据
        return {
          "code": res.status, //解析接口状态
          "msg": data.length, //解析提示文本
          "count": data.length, //解析数据长度
          "data": data //解析数据列表
        };
      }
    });


  }).catch(err => {
    console.log(err)
  })


//relation添加示例
// const relation = Bmob.Relation('Place') // 需要关联的表
// const relID = relation.add(['svJxBBBC','8Q5U000p']) //关联表中需要关联的objectId, 返回一个Relation对象, add方法接受string和array的类型参数
// const query = Bmob.Query('path')
// query.get('KyZg222I').then(res => {
//   res.set('place1',relID); // 将Relation对象保存到two字段中，即实现了一对多的关联
//   res.save();
// })



// const query2 = Bmob.Query("GAS");
// // query2.equalTo("Date","==", "2021-05-13");
// // query2.equalTo("class","==", "早");
// // query2.equalTo("timenum","==", "二");
// query2.find().then(res => {
// 	//data=res;
//
// });
// const query3 = Bmob.Query("GAS");
// query.equalTo("Date","==", "2021-05-13");
// query.equalTo("class","==", "早");
// query.equalTo("timenum","==", "三");
// query.find().then(res => {
// 	data3=res;
// });



// table.render({
//   elem: '#test'
//   ,url:'https://d1124.github.io/firstone/1.json'
//   ,title: '用户数据表'
// ,toolbar: '#toolbarDemo'
//   ,cols: [[
//     {field:'place', title:'地点',unresize:true, rowspan: 3}
//     ,{align: 'center',title:'第一次', colspan: 7}
//   ,{align: 'center',title:'第二次', colspan: 7}
//   ,{align: 'center',title:'第三次', colspan: 7}
//   ],
// [
// {field:'CH4',title:'CH4(\%)' }
//   ,{ field:'CO2',title:'CO2(\%)'}
//   ,{ field:'CO',title:'CO(ppm)'}
//   ,{ field:'O2',title:'O2(\%)'}
//   ,{ field:'T',title:'温度(˚C)'}
//   ,{ field:'tantou',title:'探头(CH4\%)'}
//   ,{ field:'fireboss',title:'瓦检员', rowspan: 2},
// {field:'CH4',title:'CH4' }
//   ,{ field:'CO2',title:'CO2'}
//   ,{ field:'CO',title:'CO'}
//   ,{ field:'O2',title:'O2'}
//   ,{ field:'T',title:'温度'}
//   ,{ field:'tantou',title:'探头'}
//   ,{ field:'fireboss',title:'瓦检员', rowspan: 2},
// {field:'CH4',title:'CH4' }
//   ,{ field:'CO2',title:'CO2'}
//   ,{ field:'CO',title:'CO'}
//   ,{ field:'O2',title:'O2'}
//   ,{ field:'T',title:'温度'}
//   ,{ field:'tantou',title:'探头'}
//   ,{ field:'fireboss',title:'瓦检员', rowspan: 2}
// ]
// ]
//   ,page: true
//   ,response: {
//     statusCode: 200 //重新规定成功的状态码为 200，table 组件默认为 0
//   }
//   ,parseData: function(res){ //将原始数据解析成 table 组件所规定的数据
//     return {
//       "code": res.status, //解析接口状态
//       "msg": data.length, //解析提示文本
//       "count": data.length, //解析数据长度
//       "data": data //解析数据列表
//     };
//   }
// });



});
</script>
</body>
</html>
